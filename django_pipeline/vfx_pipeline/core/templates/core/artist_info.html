{% extends 'core/info_base.html' %}

{% block title %}Artist Info{% endblock %}

{% block content %}

<h1>Artist Info</h1>

<div class="info-layout">
  <div class="info-panel info-profile-panel">
    <div class="info-avatar-wrapper">
      {% if artist.image %}
        <img src="{{ artist.image.url }}" alt="{{ artist.username }}">
      {% else %}
        <div style="width:100%; height:260px; display:flex; align-items:center; justify-content:center; background:#4c4c4c; color:#fff; font-size:48px; font-weight:600;">
          {{ artist.username|slice:":1"|upper }}
        </div>
      {% endif %}
      <span class="info-status-tag info-status-{{ artist.status }}">{{ artist.get_status_display }}</span>
    </div>
    <h2>{{ artist.username }}</h2>
    <p>Joined {{ artist.joined_at|date:"F j, Y" }}</p>

    <div class="info-profile-meta">
      <div>
        <div class="info-meta-label">Country</div>
        <div class="info-meta-value">{{ artist.country|default:"-" }}</div>
      </div>
      <div>
        <div class="info-meta-label">Experience</div>
        <div class="info-meta-value">{{ artist.years_experience }} yrs</div>
      </div>
      <div>
        <div class="info-meta-label">Private Email</div>
        <div class="info-meta-value">{{ artist.private_email|default:"-" }}</div>
      </div>
      <div>
        <div class="info-meta-label">Professional Email</div>
        <div class="info-meta-value">{{ artist.professional_email|default:"-" }}</div>
      </div>
    </div>
  </div>

  <div class="info-panel info-form-panel">
    <h2>Edit Profile</h2>
    <form method="post" enctype="multipart/form-data" class="info-form">
      {% csrf_token %}
      {% for field in form %}
        {% if field.name != "professional_email" %}
          <div class="info-field-row">
            {{ field.label_tag }}
            {{ field }}
            {% if field.errors %}
              <div class="info-field-errors">
                {% for error in field.errors %}{{ error }}<br>{% endfor %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <div class="info-profile-actions">
        <button type="submit" class="info-btn info-btn-secondary">Save Changes</button>
        <a href="{% url 'artist_manager' %}" class="info-btn info-btn-danger">Back</a>
      </div>
    </form>
  </div>
</div>

{% endblock %}